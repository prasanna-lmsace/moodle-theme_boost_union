define("theme_boost_union/submenu",["exports","theme_boost/bootstrap/carousel","core/key_codes"],(function(_exports,_carousel,_key_codes){var obj;
/**
   * Theme Boost Union - JS code to initialize and handle events of the sub menus in smart menu.
   *
   * This AMD module is copied and modified from lib/amd/src/usermenu.js.
   *
   * @module     theme_boost_union/submenu
   * @copyright  2024 bdecent GmbH <https://bdecent.de>
   * @copyright  based on code from core/usermenu by Mihail Geshoski
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_carousel=(obj=_carousel)&&obj.__esModule?obj:{default:obj};const Selectors_smartMenuCarousel='[data-bs-toggle="smartmenu-carousel"]',Selectors_smartMenuCarouselClass=".theme-boost-union-smartmenu-carousel",Selectors_smartMenuCarouselItemActive='[data-bs-toggle="smartmenu-carousel"] .carousel-item.active',Selectors_smartMenuCarouselNavigationLink='[data-bs-toggle="smartmenu-carousel"] .carousel-navigation-link',Selectors_smartMenuDropDownItems="ul.dropdown-menu li.nav-item",Selectors_dropDownMenu=".dropdown-menu",Selectors_roleMenu='[role="menu"]',Selectors_region={dropDown:'[data-region="moredropdown"]'};var _default={init:()=>{const smartMenus=document.querySelectorAll(Selectors_smartMenuCarouselClass);void 0!==smartMenus&&null!==smartMenus.length&&smartMenus.forEach((e=>(smartMenu=>{const smartMenuCarousel=smartMenu.querySelector(Selectors_smartMenuCarousel);smartMenu.addEventListener("click",(e=>{e.target.matches(Selectors_smartMenuCarouselNavigationLink)&&carouselManagement(e)}),!0),smartMenu.addEventListener("keydown",(e=>{e.keyCode!==_key_codes.space&&e.keyCode!==_key_codes.enter||!e.target.matches(Selectors_smartMenuCarouselNavigationLink)||(e.preventDefault(),carouselManagement(e))}),!0);const carouselManagement=e=>{e.stopPropagation();const targetedCarouselItemId=e.target.dataset.carouselTargetId,targetedCarouselItem=smartMenu.querySelector("#"+targetedCarouselItemId),index=Array.from(targetedCarouselItem.parentNode.children).indexOf(targetedCarouselItem);_carousel.default.getOrCreateInstance(smartMenuCarousel).to(index)};smartMenu.addEventListener("hide.bs.dropdown",(()=>{_carousel.default.getOrCreateInstance(smartMenuCarousel).to(0)})),null==smartMenuCarousel||smartMenuCarousel.addEventListener("slid.bs.carousel",(()=>{const activeCarouselItem=smartMenu.querySelector(Selectors_smartMenuCarouselItemActive);null!==activeCarouselItem&&activeCarouselItem.focus()}))})(e))),(()=>{window.onresize=()=>initMoreMenuCardItem();const initMoreMenuCardItem=()=>{var primaryNav=document.querySelector(".primary-navigation ul.more-nav .dropdownmoremenu");null!==primaryNav&&registerMoreMenuCardItem(primaryNav);var menuBar=document.querySelector("nav.menubar ul.more-nav .dropdownmoremenu");null!==menuBar&&registerMoreMenuCardItem(menuBar)},registerMoreMenuCardItem=moreMenu=>{if(!(moreMenu.querySelectorAll(Selectors_smartMenuDropDownItems).length<=0)){var subMenuDropDownMenu=moreMenu.querySelectorAll(Selectors_dropDownMenu+" "+Selectors_dropDownMenu);null!==subMenuDropDownMenu&&Array.from(subMenuDropDownMenu).forEach((e=>e.classList.remove("show"))),moreMenu.removeEventListener("click",hideCardMenus,!0),moreMenu.addEventListener("click",hideCardMenus,!0),moreMenu.parentNode.querySelectorAll(".dropdown.card-dropdown")&&moreMenu.parentNode.querySelectorAll(".dropdown.card-dropdown").forEach((e=>{var cardDropDown=e.querySelector(Selectors_dropDownMenu);null!==cardDropDown&&(cardDropDown.style.removeProperty("width"),cardDropDown.style.removeProperty("left"),cardDropDown.style.removeProperty("right"))}));var parentMenu=moreMenu.parentNode;parentMenu.addEventListener("shown.bs.dropdown",hideOpenMenus),parentMenu.addEventListener("hidden.bs.dropdown",hideOpenMenus)}},hideOpenMenus=e=>{if(e.target.matches(".dropdownmoremenu")){var subMenuDropDownMenu=e.currentTarget.querySelectorAll(Selectors_dropDownMenu+" "+Selectors_dropDownMenu);null!==subMenuDropDownMenu&&Array.from(subMenuDropDownMenu).forEach((e=>e.classList.remove("show")))}},hideCardMenus=e=>{var moreMenu=e.target.closest(Selectors_region.dropDown);moreMenu&&moreMenu.querySelectorAll(Selectors_dropDownMenu)&&moreMenu.querySelectorAll(Selectors_dropDownMenu).forEach((dropdownmenu=>{e.target.isEqualNode(dropdownmenu.previousElementSibling)||e.target.matches(Selectors_smartMenuCarouselNavigationLink)||!e.target.matches(".dropdown-toggle.dropdown-item")||dropdownmenu.classList.remove("show"),e.target.isEqualNode(dropdownmenu.previousElementSibling)&&e.target.parentNode.matches(".dropdown.card-dropdown")&&updatePosition(e)}))},updatePosition=e=>{const innerMenu=e.target.parentNode.querySelector(Selectors_roleMenu);if(innerMenu){var rect=innerMenu.parentNode.closest(Selectors_dropDownMenu).getBoundingClientRect(),right=document.scrollingElement.clientWidth-rect.right;rect.left>=right?(innerMenu.style.width=rect.left+"px",innerMenu.style.left=0):(innerMenu.style.width=right+"px",innerMenu.style.left="inherit",innerMenu.style.right=0)}}})()}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=submenu.min.js.map