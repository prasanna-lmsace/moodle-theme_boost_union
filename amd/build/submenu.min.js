define("theme_boost_union/submenu",["exports","jquery","core/key_codes"],(function(_exports,_jquery,_key_codes){var obj;
/**
   * Theme Boost Union - Initializes and handles events of the sub menus in smart menu.
   *
   * @module     theme_boost_union/submenu
   * @copyright  2023 bdecent GmbH <https://bdecent.de>
   * @copyright  based on code from core/usermenu by Mihail Geshoski
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};const Selectors={smartMenuCarousel:'[data-toggle="smartmenu-carousel"]',smartMenuCarouselClass:".theme-boost-union-smartmenu-carousel",smartMenuCarouselItem:'[data-toggle="smartmenu-carousel"] .carousel-item',smartMenuCarouselItemActive:'[data-toggle="smartmenu-carousel"] .carousel-item.active',smartMenuCarouselNavigationLink:'[data-toggle="smartmenu-carousel"] .carousel-navigation-link',moreMenuCarouselDropdown:".theme-boost-union-moremenu-carousel .moremenu .dropdownmoremenu",smartMenuDropDownItems:"ul.dropdown-menu li.nav-item",moreMenuCarousel:".moremenu-carousel",boostUnionMoreMenu:".boost-union-moremenu",carouselItem:".carousel-item",carouselMainItem:"#carousel-item-main",carouselInner:".carousel-inner",dropDownMenu:".dropdown-menu",roleMenu:'[role="menu"]',attr:{smartMenuCarouselTargetAttr:"data-carousel-target-id",smartMenuCarouselNavigationClass:"carousel-navigation-link",moreMenuCarousel:"moremenu-carousel"},region:{dropDown:'[data-region="moredropdown"]'}};var _default={init:()=>{const smartMenus=document.querySelectorAll(Selectors.smartMenuCarouselClass);void 0!==smartMenus&&null!==smartMenus.length&&smartMenus.forEach((e=>(smartMenu=>{smartMenu.addEventListener("click",(e=>{e.target.matches(Selectors.smartMenuCarouselNavigationLink)&&carouselManagement(e)}),!0),smartMenu.addEventListener("keydown",(e=>{e.keyCode!==_key_codes.space&&e.keyCode!==_key_codes.enter||!e.target.matches(Selectors.smartMenuCarouselNavigationLink)||(e.preventDefault(),carouselManagement(e))}),!0);const carouselManagement=e=>{e.stopPropagation();const targetedCarouselItemId=e.target.dataset.carouselTargetId,targetedCarouselItem=smartMenu.querySelector("#"+targetedCarouselItemId),index=Array.from(targetedCarouselItem.parentNode.children).indexOf(targetedCarouselItem);(0,_jquery.default)(smartMenu.querySelector(Selectors.smartMenuCarousel)).carousel(index)};(0,_jquery.default)(Selectors.smartMenu).on("hide.bs.dropdown",(()=>{(0,_jquery.default)(smartMenu.querySelector(Selectors.smartMenuCarousel)).carousel(0)})),(0,_jquery.default)(Selectors.smartMenuCarousel).on("slid.bs.carousel",(()=>{smartMenu.querySelector(Selectors.smartMenuCarouselItemActive).focus()}))})(e))),(()=>{window.onresize=()=>createMoreMenuCarousel();const createMoreMenuCarousel=()=>{var primaryNav=document.querySelector(".primary-navigation ul.more-nav .dropdownmoremenu");carouselSubmenu(primaryNav);var menuBar=document.querySelector("nav.menubar ul.more-nav .dropdownmoremenu");carouselSubmenu(menuBar)},carouselSubmenu=moreMenu=>{var items=moreMenu.querySelectorAll(Selectors.smartMenuDropDownItems);if(!(items.length<=0)){moreMenu.querySelector(Selectors.dropDownMenu).classList.contains("show")&&Array.from(moreMenu.querySelectorAll(Selectors.dropDownMenu)).forEach((e=>e.classList.remove("show")));var mainmenus=[],submenus=[];items.forEach((item=>{var menuItem=item.cloneNode(!0);void 0!==menuItem.querySelector(Selectors.boostUnionMoreMenu)&&null!==menuItem.querySelectorAll(Selectors.carouselItem)&&(menuItem.querySelectorAll(Selectors.carouselItem).forEach((el=>{var cloned=el.cloneNode(!0);cloned.classList.remove("active"),submenus.push(cloned),el.remove()})),menuItem.querySelector("a")&&menuItem.querySelector("a").hasAttribute(Selectors.attr.smartMenuCarouselTargetAttr)&&menuItem.querySelector("a").classList.add(Selectors.attr.smartMenuCarouselNavigationClass)),mainmenus.push(menuItem)}));var moreMenuCarousel=moreMenu.querySelector(Selectors.moreMenuCarousel);if(moreMenuCarousel&&null!==moreMenuCarousel.querySelector(Selectors.carouselMainItem)){var mainCarouselItem=moreMenuCarousel.querySelector(Selectors.carouselMainItem);Array.from(mainCarouselItem.childNodes).forEach((e=>e.remove())),moreMenuCarousel.querySelectorAll(Selectors.carouselItem).forEach((m=>"carousel-item-main"==m.id||m.remove())),mainmenus.forEach((e=>mainCarouselItem.appendChild(e))),mainCarouselItem.classList.add("active"),submenus.forEach((sb=>moreMenuCarousel.querySelector(Selectors.carouselInner).appendChild(sb)))}}}})(),(()=>{document.querySelectorAll(Selectors.moreMenuCarouselDropdown).forEach((menu=>{var parentMenu=menu.parentNode;(0,_jquery.default)(parentMenu).on("shown.bs.dropdown",(e=>{var dropdown=e.relatedTarget.parentNode.querySelector(Selectors.dropDownMenu),moreMenuCarousel=dropdown.nextElementSibling;moreMenuCarousel&&moreMenuCarousel.classList.contains(Selectors.attr.moreMenuCarousel)&&null!==moreMenuCarousel.querySelector(Selectors.dropDownMenu)&&(moreMenuCarousel.querySelector(Selectors.dropDownMenu).classList.add("show"),dropdown.classList.add("hide-on-show"),moreMenuCarousel.querySelector(Selectors.region.dropDown).querySelectorAll(".dropdown").forEach((cardMenu=>{cardMenu.querySelector(Selectors.roleMenu).classList.remove("show"),cardMenu.removeEventListener("click",toggledropdown,!0),cardMenu.addEventListener("click",toggledropdown,!0)})))})),(0,_jquery.default)(parentMenu).on("hidden.bs.dropdown",(e=>{var dropdown=e.relatedTarget.parentNode.querySelector(Selectors.dropDownMenu),moreMenuCarousel=dropdown.nextElementSibling;moreMenuCarousel&&moreMenuCarousel.classList.contains(Selectors.attr.moreMenuCarousel)&&null!==moreMenuCarousel.querySelector(Selectors.dropDownMenu)&&(moreMenuCarousel.querySelector(Selectors.dropDownMenu).classList.remove("show"),dropdown.classList.remove("hide-on-show"))}))}));const toggledropdown=e=>{const innerMenu=e.target.parentNode.querySelector(Selectors.roleMenu);if(innerMenu&&(innerMenu.classList.toggle("show"),innerMenu.classList.contains("show"))){var rect=innerMenu.parentNode.closest(Selectors.dropDownMenu).getBoundingClientRect(),right=document.scrollingElement.clientWidth-rect.right;rect.left>=right?(innerMenu.style.width=rect.left+"px",innerMenu.style.left=0):(innerMenu.style.width=right+"px",innerMenu.style.left="inherit",innerMenu.style.right=0)}e.stopPropagation()}})()}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=submenu.min.js.map